(
s.waitForBoot({

    //Buffer & Sample
    ~buf = Buffer.read(s, "/Users/mila/Supercollider/Sample/Mura Masa - Miss You.wav");

	// SynthDef
    SynthDef(\Sample, {
        |out=0, gain=1.0, pitch=1.0, width=0.5, reverbMix=0, delayTime=0, delayMix=0|
        var sig, reverbed, delayed, widened, amp;

        sig = PlayBuf.ar(1, ~buf, rate: pitch, doneAction:2);

        // Reverb
        reverbed = FreeVerb.ar(sig, mix: reverbMix, room:0.8, damp:0.3);

        // Delay
        delayed = DelayC.ar(reverbed, 1.0, delayTime);
        sig = XFade2.ar(reverbed!2, delayed!2, (delayMix*2-1));

        // Stereo pan
        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        // Gain
        widened = widened * gain;

        // VU Meter
        amp = Amplitude.kr(widened).clip(0,1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;

    // Synth with 0
    ~synth = Synth(\Sample, [
        \gain, 1.0,
        \width, 0.5,
        \pitch, 1.0,
        \reverbMix, 0,
        \delayTime, 0,
        \delayMix, 0
    ]);

    // GUI
    ~w = Window("DoraBrilliant", Rect(100, 100, 460, 600))
        .background_(Color.gray(0.1))
        .front;

    ~makeSlider = { |label, y, default, key|
        StaticText(~w, Rect(20, y, 150, 20)).string_(label).stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20)).value_(default)
            .background_(Color.red.blend(Color.black, 0.7))
            .action_({ |s| ~synth.set(key, s.value) });
    };

    ~sliders = (
        gain: ~makeSlider.("Gain", 20, 1.0, \gain),
        width: ~makeSlider.("Pan", 70, 0.5, \width),
        pitch: ~makeSlider.("Pitch", 120, 1.0, \pitch),
        reverb: ~makeSlider.("Reverb", 170, 0, \reverbMix),
        delayTime: ~makeSlider.("Delay Time", 220, 0, \delayTime),
        delayMix: ~makeSlider.("Delay Mix", 270, 0, \delayMix)
    );

    // Output Level
    StaticText(~w, Rect(20, 320, 200, 20)).string_("Output Level").stringColor_(Color.white);
    ~vuBG = CompositeView(~w, Rect(20, 345, 420, 25)).background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25)).background_(Color.green);

    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');

    // Play / Stop Buttons
    ~playButton = Button(~w, Rect(20, 400, 120, 35))
        .states_([["‚ñ∂ Play", Color.green, Color.black], ["‚ñ† Stop", Color.red, Color.black]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~synth.notNil.if({ ~synth.free });
                ~synth = Synth(\Sample,
                    ~sliders.collect { |s, key| [key, s.value] }.flat
                );
            }, {
                ~synth.notNil.if({ ~synth.free });
            });
        });

    // Record
   ~playButton.action = { |btn|
    if(btn.value == 0, {
        // start recording
        s.record(path: Platform.userHomeDir ++ "/Desktop/sample.wav");

        // stop old synth
        ~synth.notNil.if({ ~synth.free });

        // start synth
        ~synth = Synth(\Sample,
            ~sliders.collect { |s, key| [key, s.value] }.flat
        );
    }, {
        ~synth.notNil.if({ ~synth.free });
        // stop recording
        s.stopRecording;
    });
};

    // Space key to Play
   Routine({
    inf.do {
        if(KeyState.kr(\space), {
            ~playButton.value = 1 - ~playButton.value;
            ~playButton.action.value(~playButton);
            0.3.wait; // debounce
        });
        0.05.wait;
    }
}).play(AppClock);


});
)























(
s.waitForBoot({

    ~buf = Buffer.read(s, "/Users/mila/Supercollider/Sample/Mura Masa - Miss You.wav");

    SynthDef(\Sample, {
        |out=0, gain=1.0, pitch=1.0, width=0.5, reverbMix=0, delayTime=0, delayMix=0|
        var sig, reverbed, delayed, widened, amp;

        sig = PlayBuf.ar(1, ~buf, rate: pitch, doneAction:2);

        // Reverb
        reverbed = FreeVerb.ar(sig, mix: reverbMix, room:0.8, damp:0.3);

        // Delay
        delayed = DelayC.ar(reverbed, 1.0, delayTime);
        sig = XFade2.ar(reverbed!2, delayed!2, (delayMix*2-1));

        // Stereo width
        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        // Apply gain
        widened = widened * gain;

        // VU Meter
        amp = Amplitude.kr(widened).clip(0,1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;

    // Initial Synth with 0 Reverb/Delay
    ~synth = Synth(\Sample, [
        \gain, 1.0,
        \width, 0.5,
        \pitch, 1.0,
        \reverbMix, 0,
        \delayTime, 0,
        \delayMix, 0
    ]);

    //  GUI
    ~w = Window("DoraBrilliant", Rect(100, 100, 460, 600))
        .background_(Color.gray(0.1))
        .front;

    ~makeSlider = { |label, y, default, key|
        StaticText(~w, Rect(20, y, 150, 20)).string_(label).stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20)).value_(default)
            .background_(Color.red.blend(Color.black, 0.7))
            .action_({ |s| ~synth.set(key, s.value) });
    };

    ~sliders = (
        gain: ~makeSlider.("Gain", 20, 1.0, \gain),
        width: ~makeSlider.("Pan", 70, 0.5, \width),
        pitch: ~makeSlider.("Pitch", 120, 1.0, \pitch),
        reverb: ~makeSlider.("Reverb", 170, 0, \reverbMix),
        delayTime: ~makeSlider.("Delay Time", 220, 0, \delayTime),
        delayMix: ~makeSlider.("Delay Mix", 270, 0, \delayMix)
    );

    // VU Meter
    StaticText(~w, Rect(20, 320, 200, 20)).string_("Output Level").stringColor_(Color.white);
    ~vuBG = CompositeView(~w, Rect(20, 345, 420, 25)).background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25)).background_(Color.green);

    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');

    // Play / Stop / Record Buttons
    ~playButton = Button(~w, Rect(20, 400, 120, 35))
        .states_([["‚ñ∂ Play", Color.green, Color.black], ["‚ñ† Stop", Color.red, Color.black]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~synth.notNil.if({ ~synth.free });
                ~synth = Synth(\Sample,
                    ~sliders.collect { |s, key| [key, s.value] }.flat
                );
            }, {
                ~synth.notNil.if({ ~synth.free });
            });
        });

   ~recordButton = Button(~w, Rect(160, 400, 120, 35))
    .states_([["‚óè Record", Color.red, Color.black], ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]])
    .font_(Font("Helvetica", 14))
    .action_({ |btn|
        if(btn.value == 0, {
            // –°–Ω–∞—á–∞–ª–∞ –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–ø–∏—Å—å
            s.record(path: Platform.userHomeDir ++ "/Desktop/sample.wav");
            "üéô Recording started...".postln;

            // –ü–æ—Ç–æ–º —Å–æ–∑–¥–∞—ë–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º Synth
            ~synth.notNil.if({ ~synth.free });
            ~synth = Synth(\Sample,
                ~sliders.collect { |s, key| [key, s.value] }.flat
            );
        }, {
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Synth –∏ –∑–∞–ø–∏—Å—å
            ~synth.notNil.if({ ~synth.free });
            s.stopRecording;
            "üíæ Recording saved on Desktop.".postln;
        });
    });

    // Space key global
    Routine({
        inf.do {
            if(KeyState.space, {
                ~playButton.value = 1 - ~playButton.value;
                ~playButton.action.value(~playButton);
                0.3.wait; // debounce
            });
            0.05.wait;
        }
    }).play(AppClock);

});
)































(
s.waitForBoot({

    ~buf = Buffer.read(s, "/Users/mila/Supercollider/Sample/Mura Masa - Miss You.wav");

    SynthDef(\Sample, {
        |out=0, gain=1.0, pitch=1.0, width=0.5, reverbMix=0, delayTime=0, delayMix=0 |
        var sig, reverbed, delayed, widened, amp;

        sig = PlayBuf.ar(1, ~buf, rate: pitch, doneAction:2);

        reverbed = FreeVerb.ar(sig, mix: reverbMix, room:0.8, damp:0.3);

        delayed = DelayC.ar(reverbed, 1.0, delayTime);
        sig = XFade2.ar(reverbed!2, delayed!2, (delayMix*2-1));

        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        widened = widened * gain;

        amp = Amplitude.kr(widened).clip(0,1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;

    //  Synth with 0 Reverb/Delay
    ~synth = Synth(\Sample, [
		\gain, 1.0,
		\width, 0.5,
        \pitch, 1.0,
        \reverbMix, 0,
        \delayTime, 0,
        \delayMix, 0

    ]);

	//  GUI
    ~w = Window("DoraBrilliant", Rect(100, 100, 460, 600))
        .background_(Color.gray(0.1))
        .front;

    ~makeSlider = { |label, y, default, key|
        StaticText(~w, Rect(20, y, 150, 20)).string_(label).stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20)).value_(default)
            .background_(Color.red.blend(Color.black, 0.7))
            .action_({ |s| ~synth.set(key, s.value) });
    };

    ~sliders = (
		gain: ~makeSlider.("Gain", 220, 1.0, \gain),
		 width: ~makeSlider.("Pan", 170, 0.5, \width),
		pitch: ~makeSlider.("Pitch", 270, 1.0, \pitch,
        reverb: ~makeSlider.("Reverb", 20, 0, \reverbMix),
        delayTime: ~makeSlider.("Delay Time", 70, 0, \delayTime),
        delayMix: ~makeSlider.("Delay Mix", 120, 0, \delayMix)
        )
    );

    // VU Meter
    StaticText(~w, Rect(20, 320, 200, 20)).string_("Output Level").stringColor_(Color.white);
    ~vuBG = CompositeView(~w, Rect(20, 345, 420, 25)).background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25)).background_(Color.green);

    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');

    // Play / Stop / Record Buttons
    ~playButton = Button(~w, Rect(20, 400, 120, 35))
        .states_([["‚ñ∂ Play", Color.green, Color.black], ["‚ñ† Stop", Color.red, Color.black]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~synth.notNil.if({ ~synth.free });
                ~synth = Synth(\Sample,
                    ~sliders.collect { |s, key| [key, s.value] }.flat
                );
            }, {
                ~synth.notNil.if({ ~synth.free });
            });
        });

    ~recordButton = Button(~w, Rect(160, 400, 120, 35))
        .states_([["‚óè Record", Color.red, Color.black], ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                s.record(path: Platform.userHomeDir ++ "/Desktop/sample.wav");
                "üéô Recording started...".postln;
            }, {
                s.stopRecording;
                "üíæ Recording saved on Desktop.".postln;
            });
        });

   //Routine
    Routine({
        inf.do {
            if(KeyState.space, {
                ~playButton.value = 1 - ~playButton.value;
                ~playButton.action.value(~playButton);
                0.3.wait; // debounce
            });
            0.05.wait;
        }
    }).play(AppClock);

});
)


































(
s.waitForBoot({

    ~buf = Buffer.read(s, "/Users/mila/Supercollider/Sample/Mura Masa - Miss You.wav");

    SynthDef(\guitarSamplePlugin, {
        |out=0, reverbMix=0.5, delayTime=0.3, delayMix=0.3, width=0.5, gain=1.0, pitch=1.0|
        var sig, reverbed, delayed, widened, amp;

        sig = PlayBuf.ar(1, ~buf, rate: pitch, doneAction:2);

        reverbed = FreeVerb.ar(sig, mix: reverbMix, room:0.8, damp:0.3);

        delayed = DelayC.ar(reverbed, 1.0, delayTime);
        sig = XFade2.ar(reverbed!2, delayed!2, (delayMix*2-1));

        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        widened = widened * gain;

        amp = Amplitude.kr(widened).clip(0,1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;

    ~synth = Synth(\guitarSamplePlugin, [
        \reverbMix, 0.5,
        \delayTime, 0.3,
        \delayMix, 0.3,
        \width, 0.5,
        \gain, 1.0,
        \pitch, 1.0
    ]);

    // --- GUI ---
    ~w = Window("üé∏ Guitar Sample Player PRO", Rect(100, 100, 460, 600))
        .background_(Color.gray(0.1))
        .front;

    ~makeSlider = { |label, y, default, key|
        StaticText(~w, Rect(20, y, 150, 20)).string_(label).stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20)).value_(default)
            .background_(Color.red.blend(Color.black, 0.7))
            .action_({ |s| ~synth.set(key, s.value) });
    };

    ~sliders = (
        reverb: ~makeSlider.("Reverb", 20, 0.5, \reverbMix),
        delayTime: ~makeSlider.("Delay Time", 70, 0.3, \delayTime),
        delayMix: ~makeSlider.("Delay Mix", 120, 0.3, \delayMix),
        width: ~makeSlider.("Stereo Width", 170, 0.5, \width),
        gain: ~makeSlider.("Gain", 220, 1.0, \gain),
        pitch: ~makeSlider.("Pitch/Speed", 270, 1.0, \pitch)
    );

    // --- VU Meter ---
    StaticText(~w, Rect(20, 320, 200, 20)).string_("Output Level").stringColor_(Color.white);
    ~vuBG = CompositeView(~w, Rect(20, 345, 420, 25)).background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25)).background_(Color.green);

    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');

    // --- Play / Stop / Record Buttons ---
    ~playButton = Button(~w, Rect(20, 400, 120, 35))
        .states_([["‚ñ∂ Play", Color.green, Color.black], ["‚ñ† Stop", Color.red, Color.black]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~synth.notNil.if({ ~synth.free });
                ~synth = Synth(\guitarSamplePlugin,
                    ~sliders.collect { |s, key| [key, s.value] }.flat
                );
            }, {
                ~synth.notNil.if({ ~synth.free });
            });
        });

    ~recordButton = Button(~w, Rect(160, 400, 120, 35))
        .states_([["‚óè Record", Color.red, Color.black], ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                s.record(path: Platform.userHomeDir ++ "/Desktop/guitar_output.wav");
                "üéô Recording started...".postln;
            }, {
                s.stopRecording;
                "üíæ Recording saved on Desktop.".postln;
            });
        });

    // --- Space key –≥–ª–æ–±–∞–ª—å–Ω–æ ---
    Routine({
        inf.do {
            if(KeyState.space, {
                ~playButton.value = 1 - ~playButton.value;
                ~playButton.action.value(~playButton);
                0.3.wait; // debounce, —á—Ç–æ–±—ã –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥
            });
            0.05.wait;
        }
    }).play(AppClock);

});
)































(
// üé∏ Guitar Sample Player PRO ‚Äî real-time Pitch, Gain, Stereo

s.waitForBoot({

 ~buf = Buffer.read(s,"/Users/mila/Supercollider/Sample/Miss You.wav" ); // –ø–æ–º–µ–Ω—è–π –ø—É—Ç—å –Ω–∞ —Å–≤–æ–π WAV

    // --- SynthDef —Å —Å–µ–º–ø–ª–æ–º, –≥–µ–π–Ω–æ–º, Pitch/Speed –∏ stereo ---
    SynthDef(\guitarSamplePlugin, {
        |out=0, reverbMix=0.5, delayTime=0.3, delayMix=0.3, width=0.5, gain=1.0, pitch=1.0|
        var sig, reverbed, delayed, widened, amp;

        // PlayBuf —Å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–º pitch
        sig = PlayBuf.ar(1, ~buf, rate: pitch, doneAction:2); // –º–æ–Ω–æ

        // Reverb
        reverbed = FreeVerb.ar(sig, mix: reverbMix, room:0.8, damp:0.3);

        // Delay—é
        delayed = DelayC.ar(reverbed, 1.0, delayTime);
        sig = XFade2.ar(reverbed!2, delayed!2, (delayMix*2-1));

        // Stereo width, —Ü–µ–Ω—Ç—Ä = 0
        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        // Apply gain
        widened = widened * gain;

        // VU Meter
        amp = Amplitude.kr(widened).clip(0,1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;

    // --- –°–æ–∑–¥–∞–µ–º Synth –∑–∞—Ä–∞–Ω–µ–µ ---
    ~synth = Synth(\guitarSamplePlugin, [
        \reverbMix, 0.5,
        \delayTime, 0.3,
        \delayMix, 0.3,
        \width, 0.5,  // —Ü–µ–Ω—Ç—Ä —Å—Ç–µ—Ä–µ–æ
        \gain, 1.0,
        \pitch, 1.0
    ]);

    // --- GUI ---
    ~w = Window("üé∏ Guitar Sample Player PRO", Rect(100, 100, 460, 600))
        .background_(Color.gray(0.1))
        .front;

    ~makeSlider = { |label, y, default, key|
        StaticText(~w, Rect(20, y, 150, 20)).string_(label).stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20)).value_(default)
            .background_(Color.red.blend(Color.black, 0.7))
            .action_({ |s| ~synth.set(key, s.value) });
    };

    ~sliders = (
        reverb: ~makeSlider.("Reverb", 20, 0.5, \reverbMix),
        delayTime: ~makeSlider.("Delay Time", 70, 0.3, \delayTime),
        delayMix: ~makeSlider.("Delay Mix", 120, 0.3, \delayMix),
        width: ~makeSlider.("Stereo Width", 170, 0.5, \width), // —Å—Ç–∞—Ä—Ç –≤ —Ü–µ–Ω—Ç—Ä–µ
        gain: ~makeSlider.("Gain", 220, 1.0, \gain),
        pitch: ~makeSlider.("Pitch/Speed", 270, 1.0, \pitch)
    );

    // --- VU Meter ---
    StaticText(~w, Rect(20, 320, 200, 20)).string_("Output Level").stringColor_(Color.white);
    ~vuBG = CompositeView(~w, Rect(20, 345, 420, 25)).background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25)).background_(Color.green);

    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');

    // --- Play / Stop / Record Buttons ---
    ~playButton = Button(~w, Rect(20, 400, 120, 35))
        .states_([["‚ñ∂ Play", Color.green, Color.black], ["‚ñ† Stop", Color.red, Color.black]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~synth.notNil.if({ ~synth.free });
                ~synth = Synth(\guitarSamplePlugin,
                    ~sliders.collect { |s, key| [key, s.value] }.flat
                );
            }, {
                ~synth.notNil.if({ ~synth.free });
            });
        });

    ~recordButton = Button(~w, Rect(160, 400, 120, 35))
        .states_([["‚óè Record", Color.red, Color.black], ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                s.record(path: Platform.userHomeDir ++ "/Desktop/guitar_output.wav");
                "üéô Recording started...".postln;
            }, {
                s.stopRecording;
                "üíæ Recording saved on Desktop.".postln;
            });
        });

    // --- –ü—Ä–∏–≤—è–∑–∫–∞ play/stop –∫ –ø—Ä–æ–±–µ–ª—É ---
    ~keyFunc = {
        arg key;
        if(key == 32, {  // –∫–æ–¥ –ø—Ä–æ–±–µ–ª–∞
            ~playButton.value = 1 - ~playButton.value; // –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
            ~playButton.action.value(~playButton);       // –≤—ã–∑—ã–≤–∞–µ–º action
        });
    };

    thisProcess.keyDownAction = ~keyFunc;
});
)
















(
(
// üé∏ Guitar Sample Player PRO ‚Äî real-time Pitch, Gain, Stereo

s.waitForBoot({

   ~buf = Buffer.read(s,"/Users/mila/Supercollider/Sample/Miss You.wav" ); // –ø–æ–º–µ–Ω—è–π –ø—É—Ç—å –Ω–∞ —Å–≤–æ–π WAV

    // --- SynthDef —Å —Å–µ–º–ø–ª–æ–º, –≥–µ–π–Ω–æ–º, Pitch/Speed –∏ stereo ---
    SynthDef(\guitarSamplePlugin, {
        |out=0, reverbMix=0.5, delayTime=0.3, delayMix=0.3, width=1.0, gain=1.0, pitch=1.0|
        var sig, reverbed, delayed, widened, amp;

        // PlayBuf —Å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–º pitch
        sig = PlayBuf.ar(1, ~buf, rate: pitch, doneAction:2); // –º–æ–Ω–æ

        // Reverb
        reverbed = FreeVerb.ar(sig, mix: reverbMix, room:0.8, damp:0.3);

        // Delay
        delayed = DelayC.ar(reverbed, 1.0, delayTime);
        sig = XFade2.ar(reverbed!2, delayed!2, (delayMix*2-1));

        // Stereo width
        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        // Apply gain
        widened = widened * gain;

        // VU Meter
        amp = Amplitude.kr(widened).clip(0,1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;

    // --- –°–æ–∑–¥–∞–µ–º Synth –∑–∞—Ä–∞–Ω–µ–µ ---
    ~synth = Synth(\guitarSamplePlugin, [
        \reverbMix, 0.5,
        \delayTime, 0.3,
        \delayMix, 0.3,
        \width, 1.0,
        \gain, 1.0,
        \pitch, 1.0
    ]);

    // --- GUI ---
    ~w = Window("üé∏ Guitar Sample Player PRO", Rect(100, 100, 460, 600))
        .background_(Color.gray(0.1))
        .front;

    ~makeSlider = { |label, y, default, key|
        StaticText(~w, Rect(20, y, 150, 20)).string_(label).stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20)).value_(default)
            .background_(Color.red.blend(Color.black, 0.7))
            .action_({ |s| ~synth.set(key, s.value) });
    };

    ~sliders = (
        reverb: ~makeSlider.("Reverb", 20, 0.5, \reverbMix),
        delayTime: ~makeSlider.("Delay Time", 70, 0.3, \delayTime),
        delayMix: ~makeSlider.("Delay Mix", 120, 0.3, \delayMix),
        width: ~makeSlider.("Stereo Width", 170, 1.0, \width),
        gain: ~makeSlider.("Gain", 220, 1.0, \gain),
        pitch: ~makeSlider.("Pitch/Speed", 270, 1.0, \pitch)
    );

    // --- VU Meter ---
    StaticText(~w, Rect(20, 320, 200, 20)).string_("Output Level").stringColor_(Color.white);
    ~vuBG = CompositeView(~w, Rect(20, 345, 420, 25)).background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25)).background_(Color.green);

    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');

    // --- Play / Stop / Record Buttons ---
    ~playButton = Button(~w, Rect(20, 400, 120, 35))
        .states_([["‚ñ∂ Play", Color.green, Color.black], ["‚ñ† Stop", Color.red, Color.black]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~synth.notNil.if({ ~synth.free });
                ~synth = Synth(\guitarSamplePlugin,
                    ~sliders.collect { |s, key| [key, s.value] }.flat
                );
            }, {
                ~synth.notNil.if({ ~synth.free });
            });
        });

    ~recordButton = Button(~w, Rect(160, 400, 120, 35))
        .states_([["‚óè Record", Color.red, Color.black], ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                s.record(path: Platform.userHomeDir ++ "/Desktop/guitar_output.wav");
                "üéô Recording started...".postln;
            }, {
                s.stopRecording;
                "üíæ Recording saved on Desktop.".postln;
            });
        });

});
)
)















// üé∏ Guitar Sample Player PRO ‚Äî —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —Å–ª–∞–π–¥–µ—Ä–∞–º–∏ –∏ Pitch/Speed

(s.waitForBoot({

    // --- –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–µ–º–ø–ª ---
   ~buf = Buffer.read(s, "/Users/mila/Desctop/mono.wav"); // –ø–æ–º–µ–Ω—è–π –ø—É—Ç—å –Ω–∞ —Å–≤–æ–π WAV

    // --- SynthDef —Å —Å–µ–º–ø–ª–æ–º, –≥–µ–π–Ω–æ–º –∏ Pitch/Speed ---
    SynthDef(\guitarSamplePlugin, {
        |out=0, reverbMix=0.5, delayTime=0.3, delayMix=0.3, width=1.0, gain=1.0, pitch=1.0|
        var sig, reverbed, delayed, widened, amp;

        // –ò—Å—Ç–æ—á–Ω–∏–∫ ‚Äî WAV —Å–µ–º–ø–ª —Å pitch/—Å–∫–æ—Ä–æ—Å—Ç—å—é
        sig = PlayBuf.ar(1, ~buf, rate: pitch, doneAction:2); // –º–æ–Ω–æ

        // Reverb
        reverbed = FreeVerb.ar(sig, mix: reverbMix, room:0.8, damp:0.3);

        // Delay
        delayed = DelayC.ar(reverbed, 1.0, delayTime);
        sig = XFade2.ar(reverbed!2, delayed!2, (delayMix*2-1));

        // Stereo width
        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        // Apply gain
        widened = widened * gain;

        // –ê–º–ø–ª–∏—Ç—É–¥–∞ –¥–ª—è VU
        amp = Amplitude.kr(widened).clip(0,1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;
    OSCdef.freeAll;

    // --- GUI ---
    ~accent = Color.red;
    ~bg = Color.gray(0.1);

    ~w = Window("üé∏ Guitar Sample Player PRO", Rect(100, 100, 460, 620))
        .background_(~bg)
        .front;

    // --- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–æ–≤ ---
    ~makeSlider = { |label, y, default|
        StaticText(~w, Rect(20, y, 150, 20)).string_(label).stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20)).value_(default)
            .background_(~accent.blend(Color.black, 0.7));
    };

    ~sliders = (
        reverb: ~makeSlider.("Reverb", 20, 0.5),
        delayTime: ~makeSlider.("Delay Time", 70, 0.3),
        delayMix: ~makeSlider.("Delay Mix", 120, 0.3),
        width: ~makeSlider.("Stereo Width", 170, 1.0),
        gain: ~makeSlider.("Gain", 220, 1.0),
        pitch: ~makeSlider.("Pitch/Speed", 270, 1.0) // 1.0 = –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
    );

    // --- VU Meter ---
    StaticText(~w, Rect(20, 320, 200, 20)).string_("Output Level").stringColor_(Color.white);
    ~vuBG = CompositeView(~w, Rect(20, 345, 420, 25)).background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25)).background_(Color.green);

    // --- –°–æ–∑–¥–∞–µ–º Synth –∑–∞—Ä–∞–Ω–µ–µ ---
    ~synth = Synth(\guitarSamplePlugin, [
        \reverbMix, ~sliders[\reverb].value,
        \delayTime, ~sliders[\delayTime].value,
        \delayMix, ~sliders[\delayMix].value,
        \width, ~sliders[\width].value,
        \gain, ~sliders[\gain].value,
        \pitch, ~sliders[\pitch].value
    ]);

    // --- –°–ª–∞–π–¥–µ—Ä—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ ---
    ~sliders.do({ |slider, key|
        slider.action_({ |s|
            ~synth.notNil.if({ ~synth.set(key, s.value) });
        });
    });

    // --- Play/Stop Button ---
    ~playButton = Button(~w, Rect(20, 400, 120, 35))
        .states_([["‚ñ∂ Play", Color.green, Color.black], ["‚ñ† Stop", Color.red, Color.black]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~synth.notNil.if({ ~synth.free });
                ~synth = Synth(\guitarSamplePlugin, [
                    \reverbMix, ~sliders[\reverb].value,
                    \delayTime, ~sliders[\delayTime].value,
                    \delayMix, ~sliders[\delayMix].value,
                    \width, ~sliders[\width].value,
                    \gain, ~sliders[\gain].value,
                    \pitch, ~sliders[\pitch].value
                ]);
            }, {
                ~synth.notNil.if({ ~synth.free });
            });
        });

    // --- Record Button ---
    ~recordButton = Button(~w, Rect(160, 400, 120, 35))
        .states_([["‚óè Record", Color.red, Color.black], ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                s.record(path: Platform.userHomeDir ++ "/Desktop/guitar_output.wav");
                "üéô Recording started...".postln;
            }, {
                s.stopRecording;
                "üíæ Recording saved on Desktop.".postln;
            });
        });

    // --- VU Meter –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ---
    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');

});)

















(
// üé∏ Guitar Sample Player PRO ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–µ—Ä—Å–∏—è

s.waitForBoot({

    // --- –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–µ–º–ø–ª ---
     ~buf = Buffer.read(s, "/Users/mila/Desctop/mono.wav"); // –ø–æ–º–µ–Ω—è–π –ø—É—Ç—å –Ω–∞ —Å–≤–æ–π WAV
    // --- SynthDef —Å —Å–µ–º–ø–ª–æ–º –∏ –≥–µ–π–Ω–æ–º ---
    SynthDef(\guitarSamplePlugin, {
        |out=0, reverbMix=0.5, delayTime=0.3, delayMix=0.3, width=1.0, gain=1.0|
        var sig, reverbed, delayed, widened, amp;

        // –ò—Å—Ç–æ—á–Ω–∏–∫ ‚Äî WAV —Å–µ–º–ø–ª
        sig = PlayBuf.ar(1, ~buf, doneAction:2); // –º–æ–Ω–æ

        // Reverb
        reverbed = FreeVerb.ar(sig, mix: reverbMix, room:0.8, damp:0.3);

        // Delay
        delayed = DelayC.ar(reverbed, 1.0, delayTime);
        sig = XFade2.ar(reverbed!2, delayed!2, (delayMix*2-1));

        // Stereo width
        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        // Apply gain
        widened = widened * gain;

        // –ê–º–ø–ª–∏—Ç—É–¥–∞ –¥–ª—è VU
        amp = Amplitude.kr(widened).clip(0, 1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;
    OSCdef.freeAll;

    // --- GUI ---
    ~accent = Color.red;
    ~bg = Color.gray(0.1);

    ~w = Window("üé∏ Guitar Sample Player PRO", Rect(100, 100, 460, 580))
        .background_(~bg)
        .front;

    // --- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–æ–≤ ---
    ~makeSlider = { |label, y, default|
        StaticText(~w, Rect(20, y, 150, 20)).string_(label).stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20)).value_(default)
            .background_(~accent.blend(Color.black, 0.7));
    };

    ~sliders = (
        reverb: ~makeSlider.("Reverb", 20, 0.5),
        delayTime: ~makeSlider.("Delay Time", 70, 0.3),
        delayMix: ~makeSlider.("Delay Mix", 120, 0.3),
        width: ~makeSlider.("Stereo Width", 170, 1.0),
        gain: ~makeSlider.("Gain", 220, 1.0)
    );

    // --- VU Meter ---
    StaticText(~w, Rect(20, 270, 200, 20)).string_("Output Level").stringColor_(Color.white);
    ~vuBG = CompositeView(~w, Rect(20, 295, 420, 25)).background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25)).background_(Color.green);

    // --- Play/Stop Button ---
    ~playButton = Button(~w, Rect(20, 340, 120, 35))
        .states_([
            ["‚ñ∂ Play", Color.green, Color.black],
            ["‚ñ† Stop", Color.red, Color.black]
        ])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~synth.notNil.if({ ~synth.free });
                ~synth = Synth(\guitarSamplePlugin, [
                    \reverbMix, ~sliders[\reverb].value,
                    \delayTime, ~sliders[\delayTime].value,
                    \delayMix, ~sliders[\delayMix].value,
                    \width, ~sliders[\width].value,
                    \gain, ~sliders[\gain].value
                ]);
            }, {
                ~synth.notNil.if({ ~synth.free });
            });
        });

    // --- Record Button ---
    ~recordButton = Button(~w, Rect(160, 340, 120, 35))
        .states_([
            ["‚óè Record", Color.red, Color.black],
            ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]
        ])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                s.record(path: Platform.userHomeDir ++ "/Desktop/guitar_output.wav");
                "üéô Recording started...".postln;
            }, {
                s.stopRecording;
                "üíæ Recording saved on Desktop.".postln;
            });
        });

    // --- VU Meter –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ---
    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');
});
)













(
// üé∏ Guitar Sample Player PRO ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–µ—Ä—Å–∏—è

s.waitForBoot({

    // --- –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–µ–º–ø–ª ---
    ~buf = Buffer.read(s, "/Users/mila/Desctop/mono.wav"); // –ø–æ–º–µ–Ω—è–π –ø—É—Ç—å –Ω–∞ —Å–≤–æ–π WAV

    // --- SynthDef —Å —Å–µ–º–ø–ª–æ–º ---
    SynthDef(\guitarSamplePlugin, {
        |out=0, reverbMix=0.5, delayTime=0.3, delayMix=0.3, width=1.0|
        var sig, reverbed, delayed, widened, amp;

        // –ò—Å—Ç–æ—á–Ω–∏–∫ ‚Äî WAV —Å–µ–º–ø–ª
        sig = PlayBuf.ar(1, ~buf, doneAction:2); // –º–æ–Ω–æ

        // Reverb
        reverbed = FreeVerb.ar(sig, mix: reverbMix, room:0.8, damp:0.3);

        // Delay
        delayed = DelayC.ar(reverbed, 1.0, delayTime);
        sig = XFade2.ar(reverbed!2, delayed!2, (delayMix*2-1));

        // Stereo width
        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        // –ê–º–ø–ª–∏—Ç—É–¥–∞ –¥–ª—è VU
        amp = Amplitude.kr(widened).clip(0, 1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;
    OSCdef.freeAll;

    // --- GUI ---
    ~accent = Color.red;
    ~bg = Color.gray(0.1);

    ~w = Window("üé∏ Guitar Sample Player PRO", Rect(100, 100, 460, 540))
        .background_(~bg)
        .front;

    // --- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–æ–≤ ---
    ~makeSlider = { |label, y, default|
        StaticText(~w, Rect(20, y, 150, 20)).string_(label).stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20)).value_(default)
            .background_(~accent.blend(Color.black, 0.7));
    };

    ~sliders = (
        reverb: ~makeSlider.("Reverb", 20, 0.5),
        delayTime: ~makeSlider.("Delay Time", 70, 0.3),
        delayMix: ~makeSlider.("Delay Mix", 120, 0.3),
        width: ~makeSlider.("Stereo Width", 170, 1.0)
    );

    // --- VU Meter ---
    StaticText(~w, Rect(20, 220, 200, 20)).string_("Output Level").stringColor_(Color.white);
    ~vuBG = CompositeView(~w, Rect(20, 245, 420, 25)).background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25)).background_(Color.green);

    // --- Play/Stop Button ---
    ~playButton = Button(~w, Rect(20, 280, 120, 35))
        .states_([
            ["‚ñ∂ Play", Color.green, Color.black],
            ["‚ñ† Stop", Color.red, Color.black]
        ])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~synth.notNil.if({ ~synth.free });
                ~synth = Synth(\guitarSamplePlugin, [
                    \reverbMix, ~sliders[\reverb].value,
                    \delayTime, ~sliders[\delayTime].value,
                    \delayMix, ~sliders[\delayMix].value,
                    \width, ~sliders[\width].value
                ]);
            }, {
                ~synth.notNil.if({ ~synth.free });
            });
        });

    // --- Record Button ---
    ~recordButton = Button(~w, Rect(160, 280, 120, 35))
        .states_([
            ["‚óè Record", Color.red, Color.black],
            ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]
        ])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                s.record(path: Platform.userHomeDir ++ "/Desktop/guitar_output.wav");
                "üéô Recording started...".postln;
            }, {
                s.stopRecording;
                "üíæ Recording saved on Desktop.".postln;
            });
        });

    // --- VU Meter –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ---
    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');
});
)

































(
SynthDef(\violinSafe, {
    |out=0, freq=440, amp=0.1, dur=1.0|
    var env, noise, tone, sig;

    // –û–≥–∏–±–∞—é—â–∞—è
    env = EnvGen.kr(Env.perc(0.01, dur, 1), doneAction:2);

    // –°–º—è–≥—á—ë–Ω–Ω—ã–π —à—É–º –∞—Ç–∞–∫–∏ (—Å–º—ã—á–æ–∫)
    noise = PinkNoise.ar(0.05) * env;

    // –û—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–Ω (–æ–¥–Ω–∞ –≥–∞—Ä–º–æ–Ω–∏–∫–∞ —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä)
    tone = Saw.ar(freq) * env;

    // –§–∏–ª—å—Ç—Ä —Ä–µ–∑–æ–Ω–∞—Ç–æ—Ä–∞
    tone = BPF.ar(tone, freq*1.0, 1.0); // freq*1.0 ‚Äî —ç—Ç–æ —á–∞—Å—Ç–æ—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–∞

    // –û–±—ä–µ–¥–∏–Ω—è–µ–º —à—É–º –∏ —Ç–æ–Ω
    sig = tone + noise;

    // –ú—è–≥–∫–∏–π –≤—ã—Ö–æ–¥
    sig = sig * amp;

    Out.ar(out, sig!2); // —Å—Ç–µ—Ä–µ–æ
}).add;
)



~violin.free;
~banjo = Synth(\violinSafe);




(
// üé∏ Guitar Plugin PRO Deluxe ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–µ—Ä—Å–∏—è

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–º—è—Ç–∏
//s.quit;
s.options.memSize = 128*1024*1024; // 128 MB
s.options.maxNodes = 1024;

s.waitForBoot({

    // --- SynthDef ---
    SynthDef(\guitarPluginProSafe, {
        |out=0, drive=1.0, reverbMix=0.5, pitch=1.0, delayTime=0.3, delayMix=0.3, tone=0.5, width=1.0, dur=2.0|
        var sig, env, driven, toned, reverbed, delayed, stereo, widened, amp;

        // –ò—Å—Ç–æ—á–Ω–∏–∫
        sig = Saw.ar(440);

        // Pitch
        sig = PitchShift.ar(sig, pitchRatio: pitch, windowSize: 0.1, pitchDispersion: 0.0);

        // –û–≥–∏–±–∞—é—â–∞—è
        env = EnvGen.kr(Env.perc(0.01, dur, 1.0), doneAction:2);
        sig = sig * env;

        // Drive
        driven = tanh(sig * (drive * 3));

        // Tone
        toned = LPF.ar(driven, tone.linexp(0,1,400,12000));

        // Reverb ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω—ã–π FreeVerb
        reverbed = FreeVerb.ar(toned, mix: reverbMix, room: 0.9, damp: 0.3);

        // Delay ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–π DelayC
        delayed = DelayC.ar(reverbed, 1.0, delayTime);
        sig = XFade2.ar(reverbed!2, delayed!2, (delayMix*2-1));

        // Stereo width
        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        // –ê–º–ø–ª–∏—Ç—É–¥–∞ –¥–ª—è VU
        amp = Amplitude.kr(widened).clip(0, 1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;
    OSCdef.freeAll;

    // --- GUI ---
    ~accent = Color.red;
    ~bg = Color.gray(0.1);

    ~w = Window("üé∏ Guitar Plugin PRO Safe", Rect(100, 100, 460, 540))
        .background_(~bg)
        .front;

    // --- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–æ–≤ ---
    ~makeSlider = { |label, y, default|
        StaticText(~w, Rect(20, y, 150, 20)).string_(label).stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20)).value_(default)
            .background_(~accent.blend(Color.black, 0.7));
    };

    ~sliders = (
        drive: ~makeSlider.("Drive", 20, 1.0),
        reverb: ~makeSlider.("Reverb", 70, 0.5),
        pitch: ~makeSlider.("Pitch", 120, 1.0),
        delayTime: ~makeSlider.("Delay Time", 170, 0.3),
        delayMix: ~makeSlider.("Delay Mix", 220, 0.3),
        tone: ~makeSlider.("Tone", 270, 0.5),
        width: ~makeSlider.("Stereo Width", 320, 1.0)
    );

    // --- VU Meter ---
    StaticText(~w, Rect(20, 370, 200, 20)).string_("Output Level").stringColor_(Color.white);
    ~vuBG = CompositeView(~w, Rect(20, 395, 420, 25)).background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25)).background_(Color.green);

    // --- Play/Stop Button ---
    ~playButton = Button(~w, Rect(20, 430, 120, 35))
        .states_([
            ["‚ñ∂ Play", Color.green, Color.black],
            ["‚ñ† Stop", Color.red, Color.black]
        ])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π —Å–∏–Ω—Ç
                ~synth.notNil.if({ ~synth.free });
                ~routine = Routine({
                    loop {
                        ~synth = Synth(\guitarPluginProSafe, [
                            \drive, ~sliders[\drive].value,
                            \reverbMix, ~sliders[\reverb].value,
                            \pitch, ~sliders[\pitch].value,
                            \delayTime, ~sliders[\delayTime].value,
                            \delayMix, ~sliders[\delayMix].value,
                            \tone, ~sliders[\tone].value,
                            \width, ~sliders[\width].value,
                            \dur, 2.0
                        ]);
                        2.0.wait;
                    }
                }).play(AppClock);
            }, {
                ~routine.stop;
                ~synth.notNil.if({ ~synth.free });
            });
        });

    // --- Record Button ---
    ~recordButton = Button(~w, Rect(160, 430, 120, 35))
        .states_([
            ["‚óè Record", Color.red, Color.black],
            ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]
        ])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                s.record(path: Platform.userHomeDir ++ "/Desktop/guitar_output.wav");
                "üéô Recording started...".postln;
            }, {
                s.stopRecording;
                "üíæ Recording saved on Desktop.".postln;
            });
        });

    // --- VU Meter –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ---
    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');
});
)





























(
// üé∏ Guitar Plugin PRO Deluxe —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º —Ä–µ–≤–µ—Ä–±–æ–º

s.reboot;
s.waitForBoot({

    // --- SynthDef ---
    SynthDef(\guitarPluginPro, {
        |out=0, drive=1.0, reverbMix=0.5, pitch=1.0, delayTime=0.3, delayMix=0.3, tone=0.5, width=1.0, dur=1.0|
        var sig, env, driven, reverbed, delayedL, delayedR, stereoDelay, pitched, toned, widened, amp;

        sig = Saw.ar(440);
        pitched = PitchShift.ar(sig, pitchRatio: pitch, windowSize: 0.1, pitchDispersion: 0.0);
        env = EnvGen.kr(Env.perc(0.01, dur, 1.0), doneAction:2);
        sig = pitched * env;

        // Drive
        driven = tanh(sig * (drive * 3));

        // Tone
        toned = LPF.ar(driven, tone.linexp(0,1,400,12000));

        // --- –£–ª—É—á—à–µ–Ω–Ω—ã–π Reverb ---
        reverbed = FreeVerb.ar(
            toned,
            mix: reverbMix,
            room: 0.95,   // –±–æ–ª—å—à–∞—è –∫–æ–º–Ω–∞—Ç–∞ –¥–ª—è –æ–±—ä—ë–º–∞
            damp: 0.2     // –º–µ–Ω—å—à–µ –ø–æ–≥–ª–æ—â–µ–Ω–∏—è –≤—ã—Å–æ–∫–∏—Ö —á–∞—Å—Ç–æ—Ç ‚Üí —è—Ä–∫–∏–π
        );

        // Delay
        delayedL = CombC.ar(reverbed, 2.0, delayTime, 3);
        delayedR = CombC.ar(reverbed, 2.0, delayTime * 1.2, 3);
        stereoDelay = [delayedL, delayedR];
        sig = XFade2.ar(reverbed!2, stereoDelay, (delayMix * 2 - 1));

        // Stereo width
        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        // Amp meter
        amp = Amplitude.kr(widened).clip(0, 1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;
    OSCdef.freeAll;

    // --- –¶–≤–µ—Ç–∞ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ---
    ~accent = Color.red;
    ~bg = Color.gray(0.1);

    ~w = Window("üé∏ Guitar Plugin PRO Deluxe", Rect(100, 100, 460, 540))
        .background_(~bg)
        .front;

    // --- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–æ–≤ ---
    ~makeSlider = { |label, y, default|
        StaticText(~w, Rect(20, y, 150, 20))
            .string_(label)
            .stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20))
            .value_(default)
            .background_(~accent.blend(Color.black, 0.7));
    };

    ~sliders = (
        drive: ~makeSlider.("Drive", 20, 1.0),
        reverb: ~makeSlider.("Reverb", 70, 0.5),       // –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∏–ª—å–Ω–µ–µ
        pitch: ~makeSlider.("Pitch", 120, 1.0),
        delayTime: ~makeSlider.("Delay Time", 170, 0.3),
        delayMix: ~makeSlider.("Delay Mix", 220, 0.3),
        tone: ~makeSlider.("Tone", 270, 0.5),
        width: ~makeSlider.("Stereo Width", 320, 1.0)
    );

    // --- VU Meter ---
    StaticText(~w, Rect(20, 370, 200, 20))
        .string_("Output Level")
        .stringColor_(Color.white);

    ~vuBG = CompositeView(~w, Rect(20, 395, 420, 25))
        .background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25))
        .background_(Color.green);

    // --- Play Button ---
    ~playButton = Button(~w, Rect(20, 430, 120, 35))
        .states_([
            ["‚ñ∂ Play", Color.green, Color.black],
            ["‚ñ† Stop", Color.red, Color.black]
        ])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~routine = Routine({
                    loop {
                        ~synth = Synth(\guitarPluginPro, [
                            \drive, ~sliders[\drive].value,
                            \reverbMix, ~sliders[\reverb].value,
                            \pitch, ~sliders[\pitch].value,
                            \delayTime, ~sliders[\delayTime].value,
                            \delayMix, ~sliders[\delayMix].value,
                            \tone, ~sliders[\tone].value,
                            \width, ~sliders[\width].value,
                            \dur, 1.0
                        ]);
                        5.0.wait;
                    }
                }).play(AppClock);
            }, {
                ~routine.stop;
            });
        });

    // --- Record Button ---
    ~recordButton = Button(~w, Rect(160, 430, 120, 35))
        .states_([
            ["‚óè Record", Color.red, Color.black],
            ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]
        ])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                s.record(path: Platform.userHomeDir ++ "/Desktop/guitar_output.wav");
                "üéô Recording started...".postln;
            }, {
                s.stopRecording;
                "üíæ Recording saved on Desktop.".postln;
            });
        });

    // --- VU Meter –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ---
    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');
});
)





































(
s.quit;
s.waitForBoot({

    // --- SynthDef Deluxe ---
    SynthDef(\guitarPluginDeluxe, {
        |out=0, drive=1.0, reverbMix=0.3, pitch=1.0, delayTime=0.3, delayMix=0.3, dur=1.0|
        var sig, env, driven, reverbed, delayedL, delayedR, stereoDelay, pitched, finalSig, amp;

        sig = Saw.ar(440);
        pitched = PitchShift.ar(sig, pitchRatio: pitch, windowSize: 0.1, pitchDispersion: 0.0);
        env = EnvGen.kr(Env.perc(0.01, dur, 1.0), doneAction:2);
        sig = pitched * env;

        driven = tanh(sig * (drive*3));
        reverbed = FreeVerb.ar(driven, mix: reverbMix, room:0.9, damp:0.5);

        delayedL = CombC.ar(reverbed, 2.0, delayTime, 3);
        delayedR = CombC.ar(reverbed, 2.0, delayTime*1.2, 3);
        stereoDelay = [delayedL, delayedR];

        finalSig = XFade2.ar(reverbed!2, stereoDelay, (delayMix*2-1));

        amp = Amplitude.kr(finalSig).clip(0,1);
        SendReply.kr(Impulse.kr(20), '/amp', amp);

        Out.ar(out, finalSig);
    }).add;

    s.sync;

    // --- GUI ---
    ~accent = Color.red;
    ~bg = Color.gray(0.12);
    ~window = Window("üé∏ Guitar Plugin Deluxe", Rect(100,100,460,460)).background_(~bg).front;

    // Sliders
    ~makeSlider = { |label, y, default|
        StaticText(~window, Rect(20, y, 100, 20)).string_(label).stringColor_(Color.white);
        Slider(~window, Rect(20, y+20, 420, 20)).value_(default).background_(~accent);
    };

    ~sliders = (
        drive: ~makeSlider.("Drive", 20, 1.0),
        reverb: ~makeSlider.("Reverb", 70, 0.3),
        pitch: ~makeSlider.("Pitch", 120, 1.0),
        delayTime: ~makeSlider.("Delay Time", 170, 0.3),
        delayMix: ~makeSlider.("Delay Mix", 220, 0.3)
    );

    // VU Meter
    StaticText(~window, Rect(20, 270, 200, 20)).string_("Output Level").stringColor_(Color.white);
    ~vuBG = CompositeView(~window, Rect(20,295,420,25)).background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0,0,0,25)).background_(Color.green);

    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0,0,width,25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');

    // Play Button
    ~playButton = Button(~window, Rect(20, 340, 120, 35))
        .states_([["‚ñ∂ Play", Color.green, Color.black], ["‚ñ† Stop", Color.red, Color.black]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~routine = Routine({
                    loop {
                        Synth(\guitarPluginDeluxe, [
                            \drive, ~sliders[\drive].value,
                            \reverbMix, ~sliders[\reverb].value,
                            \pitch, ~sliders[\pitch].value,
                            \delayTime, ~sliders[\delayTime].value,
                            \delayMix, ~sliders[\delayMix].value,
                            \dur, 1.0
                        ]);
                        1.0.wait;
                    }
                }).play(AppClock);
            }, {
                ~routine.stop;
            });
        });

    // Record Button
    ~recordButton = Button(~window, Rect(160, 340, 120, 35))
        .states_([["‚óè Record", Color.red, Color.black], ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                s.record(path: Platform.userHomeDir ++ "/Desktop/guitar_output.wav");
                "üéô Recording started...".postln;
            }, {
                s.stopRecording;
                "üíæ Recording saved on Desktop.".postln;
            });
        });

});
)


(
// üé∏ Guitar Plugin PRO (fixed vars)

s.reboot;
s.waitForBoot({

    // --- SynthDef ---
    SynthDef(\guitarPluginPro, {
        |out=0, drive=1.0, reverbMix=0.3, pitch=1.0, delayTime=0.3, delayMix=0.3, tone=0.5, width=1.0, dur=1.0|
        var sig, env, driven, reverbed, delayedL, delayedR, stereoDelay, pitched, toned, widened, amp;

        sig = Saw.ar(440);
        pitched = PitchShift.ar(sig, pitchRatio: pitch, windowSize: 0.1, pitchDispersion: 0.0);
        env = EnvGen.kr(Env.perc(0.01, dur, 1.0), doneAction:2);
        sig = pitched * env;

        // Drive
        driven = tanh(sig * (drive * 3));

        // Tone (—Ç–µ–ø–ª—ã–π‚Äì—è—Ä–∫–∏–π)
        toned = LPF.ar(driven, tone.linexp(0,1,400,12000));

        // Reverb
        reverbed = FreeVerb.ar(toned, mix: reverbMix, room: 0.9, damp: 0.5);

        // Delay
        delayedL = CombC.ar(reverbed, 2.0, delayTime, 3);
        delayedR = CombC.ar(reverbed, 2.0, delayTime * 1.2, 3);
        stereoDelay = [delayedL, delayedR];
        sig = XFade2.ar(reverbed!2, stereoDelay, (delayMix * 2 - 1));

        // Stereo width
        widened = Balance2.ar(sig[0], sig[1], width.linlin(0,1,-1,1));

        // Amp meter
        amp = Amplitude.kr(widened).clip(0, 1);
        SendReply.kr(Impulse.kr(30), '/amp', amp);

        Out.ar(out, widened);
    }).add;

    s.sync;
    OSCdef.freeAll;

    // --- –¶–≤–µ—Ç–∞ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ---
    ~accent = Color.red;
    ~bg = Color.gray(0.1);

    ~w = Window("üé∏ Guitar Plugin PRO", Rect(100, 100, 460, 540))
        .background_(~bg)
        .front;

    // --- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–æ–≤ ---
    ~makeSlider = { |label, y, default|
        StaticText(~w, Rect(20, y, 100, 20))
            .string_(label)
            .stringColor_(Color.white);
        Slider(~w, Rect(20, y+20, 420, 20))
            .value_(default)
            .background_(~accent.blend(Color.black, 0.7));
    };

    ~sliders = (
        drive: ~makeSlider.("Drive", 20, 1.0),
        reverb: ~makeSlider.("Reverb", 70, 0.3),
        pitch: ~makeSlider.("Pitch", 120, 1.0),
        delayTime: ~makeSlider.("Delay Time", 170, 0.3),
        delayMix: ~makeSlider.("Delay Mix", 220, 0.3),
        tone: ~makeSlider.("Tone", 270, 0.5),
        width: ~makeSlider.("Stereo Width", 320, 1.0)
    );

    // --- VU Meter ---
    StaticText(~w, Rect(20, 370, 200, 20))
        .string_("Output Level")
        .stringColor_(Color.white);

    ~vuBG = CompositeView(~w, Rect(20, 395, 420, 25))
        .background_(Color.black);
    ~vuBar = UserView(~vuBG, Rect(0, 0, 0, 25))
        .background_(Color.green);

    // --- Play Button ---
    ~playButton = Button(~w, Rect(20, 430, 120, 35))
        .states_([
            ["‚ñ∂ Play", Color.green, Color.black],
            ["‚ñ† Stop", Color.red, Color.black]
        ])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                ~routine = Routine({
                    loop {
                        ~synth = Synth(\guitarPluginPro, [
                            \drive, ~sliders[\drive].value,
                            \reverbMix, ~sliders[\reverb].value,
                            \pitch, ~sliders[\pitch].value,
                            \delayTime, ~sliders[\delayTime].value,
                            \delayMix, ~sliders[\delayMix].value,
                            \tone, ~sliders[\tone].value,
                            \width, ~sliders[\width].value,
                            \dur, 1.0
                        ]);
                        1.0.wait;
                    }
                }).play(AppClock);
            }, {
                ~routine.stop;
            });
        });

    // --- Record Button ---
    ~recordButton = Button(~w, Rect(160, 430, 120, 35))
        .states_([
            ["‚óè Record", Color.red, Color.black],
            ["‚ñ† Stop Rec", Color.gray(0.4), Color.white]
        ])
        .font_(Font("Helvetica", 14))
        .action_({ |btn|
            if(btn.value == 0, {
                s.record(path: Platform.userHomeDir ++ "/Desktop/guitar_output.wav");
                "üéô Recording started...".postln;
            }, {
                s.stopRecording;
                "üíæ Recording saved on Desktop.".postln;
            });
        });

    // --- VU Meter –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ---
    OSCdef(\ampMeter, { |msg|
        var amp = msg[3].clip(0,1);
        {
            var width = amp.linlin(0,1,0,420);
            var color = Color.green.blend(Color.red, amp.pow(1.3));
            ~vuBar.bounds = Rect(0, 0, width, 25);
            ~vuBar.background = color;
        }.defer;
    }, '/amp');
});
)
